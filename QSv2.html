<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quorum Sensing: Bilimsel Sunum - Vanilla JS (Güncel)</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABKUlEQVQ4T62SMUtCURSGv3uLE2aKFkGIKRwNKFbS0NgZ4CrEFlY+gk2ShIWiCYFK+gJFFKpkiQ1EX8D+gkTFNKH6NTJt95vP9/fec73lL6MEkD2DSgVqY1wiEkGeBnR2CjYM8REK9sAEv0iRjOI4t7tgKnwEvYTIhU8ck8jzBYwd1jGLmg5URO1V8iGeqRoi0iA6BVihaM80mowrpBM92gCJZge54KOwDDoHNaTHnw8Abt1Hk7Rgm92ALf8Fe1P3yO2p0MvhJvG95B/6w5w1L4OTbP+7QC/b8mZ9GzB/hAVnHcF+84uGYYgF8BzOcbmJZfM5gCUeP8heAT0qnAa0lpFz4wAAAABJRU5ErkJggg==" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        /* === Değişkenler ve Temel Ayarlar (Açık Tema) === */
        :root {
            --bg-light: #f4f7f9;
            --bg-medium-light: #e8eff3;
            --primary-accent: #0077b6;
            --secondary-accent: #48a9a6;
            --highlight: #f9a825;
            --text-dark: #212529;
            --text-medium: #5a677d;
            --card-bg: rgba(255, 255, 255, 0.85);
            /* İçerik arka planı opaklaştırıldı */
            --glass-bg: rgba(232, 239, 243, 0.95);
            --glass-border: rgba(0, 119, 182, 0.3);
            --slide-bg-gradient: radial-gradient(circle at 10% 90%, rgba(72,169,166,0.1), transparent 50%),
                                 radial-gradient(circle at 90% 10%, rgba(0,119,182,0.1), transparent 50%),
                                 linear-gradient(175deg, var(--bg-light) 40%, var(--bg-medium-light) 100%);
            /* Geçiş süresini CSS değişkeni olarak tanımla */
            --transition-duration: 0.6s;
            --font-main: 'Lato', sans-serif;
            --font-heading: 'Roboto Slab', serif;
            --shadow-color-light: rgba(90,103,125,0.15);
            --shadow-color-medium: rgba(90,103,125,0.25);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-accent) var(--bg-medium-light);
        }
        html {
            font-size: 16px;
        }
        body {
            font-family: var(--font-main);
            background: var(--bg-light);
            color: var(--text-dark);
            min-height: 100vh;
            width: 100vw;
            overflow: hidden;
            line-height: 1.65;
            position: relative;
        }

        /* --- Arka Plan Efektleri --- */
        .background-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
            background: radial-gradient(circle at 5% 5%, rgba(72,169,166,0.05), transparent 40%),
                        radial-gradient(circle at 95% 95%, rgba(0,119,182,0.05), transparent 40%);
            opacity: 0.7;
        }

        /* --- Sunum Konteyneri --- */
        .presentation-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            perspective: 1800px;
        }

        /* --- Slayt Temel Stilleri --- */
        .slide {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background: var(--slide-bg-gradient);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: clamp(40px, 5vh, 60px) clamp(50px, 6vw, 80px);
            opacity: 0;
            visibility: hidden;
            transform: translateX(50%) translateZ(-200px) rotateY(-30deg);
            transform-origin: center right;
            /* Geçiş süresini değişkenden al */
            transition: opacity var(--transition-duration) ease-out, transform var(--transition-duration) cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            z-index: 1;
            pointer-events: none;
        }
        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(0) translateZ(0) rotateY(0deg);
            z-index: 2;
            pointer-events: auto;
        }
        .slide.exiting {
            opacity: 0;
            transform: translateX(-50%) translateZ(-200px) rotateY(30deg);
            transform-origin: center left;
            z-index: 1; /* Aktif slaytın arkasında kalmalı */
            pointer-events: none;
            /* Çıkış animasyonu için de geçiş tanımlı olmalı */
            transition: opacity var(--transition-duration) ease-out, transform var(--transition-duration) cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- Slayt İçerik Stilleri --- */
        .slide-content {
            max-width: 1150px;
            width: 100%;
            padding: clamp(25px, 3vw, 45px);
            background: var(--glass-bg);
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 25px 0 var(--shadow-color-medium);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            max-height: calc(100vh - 160px); /* Navigasyon/progress bar için pay */
            overflow-y: auto; /* İçerik taşarsa scroll */
        }
        .slide-content::-webkit-scrollbar { width: 8px; }
        .slide-content::-webkit-scrollbar-track { background: transparent; }
        .slide-content::-webkit-scrollbar-thumb {
            background-color: rgba(0,119,182,0.5);
            border-radius: 4px;
        }
        .slide-content::-webkit-scrollbar-thumb:hover { background-color: var(--primary-accent); }

        /* --- Layout & Tipografi & Diğer Stiller --- */
        /* Bu bölümdeki stiller önceki örneklerdekiyle aynı */
        .slide-content.two-column { display: flex; align-items: center; gap: clamp(35px, 4vw, 55px); }
        .slide-content.two-column.reversed { flex-direction: row-reverse; }
        .two-column .text-content { flex: 1.1; min-width: 0; }
        .two-column .visual-content { flex: 0.9; max-width: 460px; text-align: center; }
        .slide-content.single-column { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 20px; }
        .single-column .text-content { width: 100%; max-width: 880px; text-align: left; }
        .single-column .text-content h2, .single-column .text-content h3 { text-align: center; border: none; padding: 0; margin-bottom: 0.8em;}
        .single-column .visual-content.lower-visual { margin-top: 25px; width: 60%; }

        .slide h1.main-title { font-family: var(--font-heading); font-size: clamp(3rem, 6vw, 5rem); color: var(--text-dark); margin-bottom: 0.1em; font-weight: 700; letter-spacing: 1px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        .slide h2.subtitle { font-family: var(--font-main); font-size: clamp(1.3rem, 2.2vw, 1.6rem); color: var(--primary-accent); font-weight: 400; margin-top: 0.5em; margin-bottom: 1.5em; letter-spacing: 0.5px; border: none; padding: 0; display: block; }
        .slide h2 { font-family: var(--font-heading); font-size: clamp(1.7rem, 3.5vw, 2.5rem); color: var(--primary-accent); margin-bottom: 0.9em; font-weight: 700; border-bottom: 1px solid var(--secondary-accent); padding-bottom: 0.3em; display: inline-block; letter-spacing: 0.5px; }
        .single-column h2 { border-bottom: none; display: block; text-align: center; }
        .slide h3 { font-family: var(--font-heading); font-size: clamp(1.1rem, 2.2vw, 1.4rem); color: var(--text-dark); margin-bottom: 0.9em; font-weight: 400; opacity: 0.85; }
        .slide h4 { font-family: var(--font-heading); font-size: clamp(1rem, 1.8vw, 1.15rem); color: var(--secondary-accent); margin-bottom: 0.6em; font-weight: 700; letter-spacing: 0.2px; }
        .slide p, .slide li { font-size: clamp(0.9rem, 1.6vw, 1rem); color: var(--text-medium); margin-bottom: 0.8em; }
        .slide ul, .slide ol { margin-left: 20px; margin-bottom: 1em; padding-left: 10px; }
        .slide ul { list-style: none; }
        .slide ul li::before { content: "•"; color: var(--primary-accent); display: inline-block; width: 1em; margin-left: -1.2em; font-size: 1.1em; }
        .slide ol { list-style: none; counter-reset: step-counter; }
        .slide ol li { counter-increment: step-counter; position: relative; margin-left: 8px; padding-left: 28px; }
        .slide ol li::before { content: counter(step-counter); position: absolute; left: -10px; top: 1px; background-color: var(--secondary-accent); color: var(--bg-light); width: 20px; height: 20px; border-radius: 50%; font-size: 0.75em; font-weight: bold; text-align: center; line-height: 20px; }
        .slide strong { color: var(--primary-accent); font-weight: 700; }
        .highlight { background-color: rgba(249,168,37,0.15); padding: 0.1em 0.3em; border-radius: 3px; color: #b8731d; }
        .slide .citation { font-size: 0.7em; color: var(--secondary-accent); opacity: 0.8; vertical-align: super; margin-left: 2px; }
        .analogy { font-style: italic; border-left: 3px solid var(--highlight); padding-left: 10px; color: var(--text-medium); opacity: 0.95; margin-top: 1em; font-size: 0.9em;}
        .note { font-size: 0.8em; font-style: italic; color: var(--text-medium); opacity: 0.9; margin-top: 1em; }
        .tag { display: inline-block; font-size: 0.75em; padding: 0.1em 0.5em; border-radius: 10px; margin-left: 5px; font-weight: bold; }
        .tag.g-neg { background-color: var(--secondary-accent); color: var(--bg-light); }
        .tag.g-pos { background-color: var(--primary-accent); color: var(--bg-light); }
        .tag.g-uni { background-color: var(--highlight); color: var(--text-dark); }
        .agenda-list { list-style: none; padding-left: 0;}
        .agenda-list li { margin-bottom: 0.6em; }
        .agenda-number { display: inline-block; width: 25px; font-weight: bold; color: var(--primary-accent); }
        .agenda-detail { color: var(--text-medium); font-size: 0.9em; }
        .component-section { margin-bottom: 1.2em; }
        .component-section ul { padding-left: 10px; }
        .component-section li { margin-bottom: 0.3em; }
        .pathogen-examples { margin-top: 1em; }
        .advantage { margin-top: 1em; }
        .slide img { max-width: 100%; height: auto; border-radius: 6px; box-shadow: 0 5px 15px var(--shadow-color-light); display: block; margin: 1em auto; border: 1px solid rgba(0,119,182,0.15); transition: transform 0.4s ease, box-shadow 0.4s ease; }
        .slide img:hover { transform: scale(1.02); box-shadow: 0 10px 25px var(--shadow-color-medium); }
        .animated-diagram { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 10px; }
        .diagram-node { padding: 10px; background: rgba(255, 255, 255, 0.6); border-radius: 6px; min-width: 130px; border: 1px solid transparent; transition: transform 0.3s ease, border-color 0.3s ease; color: var(--text-dark); text-align: center; }
        .diagram-node:hover { border-color: var(--primary-accent); transform: translateY(-4px); }
        .node-icon { display: block; font-size: 2rem; margin-bottom: 6px; }
        .node-label { font-size: 0.8rem; color: var(--text-dark); font-weight: 400; }
        .diagram-arrow { font-size: 1.6rem; color: var(--primary-accent); opacity: 0.7; margin: 0 5px; align-self: center; }
        .comparison-container.detailed { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 1.5em;}
        .detailed-card { background: none; padding: 0; border: none; box-shadow: 0 4px 10px var(--shadow-color-light); border-radius: 6px; overflow:hidden; flex: 1; min-width: 220px; max-width: 300px;}
        .card-header { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 6px 6px 0 0; font-weight: 700; font-size: 1rem; font-family: var(--font-heading); }
        .card-header .icon { font-size: 1.1rem; }
        .g-neg-header { background: var(--secondary-accent); color: var(--bg-light); }
        .g-pos-header { background: var(--primary-accent); color: var(--bg-light); }
        .pathogen-pa .card-header { background: #B03A5B; color: var(--bg-light);}
        .pathogen-sa .card-header { background: #D35400; color: var(--bg-light);}
        .card-body { padding: 12px; background: var(--card-bg); border-radius: 0 0 6px 6px; border: 1px solid var(--glass-border); border-top: none; }
        .card-body ul { margin: 0; padding-left: 5px; list-style: none; }
        .card-body li { font-size: 0.85rem; color: var(--text-medium); margin-bottom: 0.5em; }
        .card-body li::before { content: "•"; color: inherit; opacity: 0.6; display: inline-block; width: 1em; margin-left: -1.1em; font-size: 1em; }
        .icon-list { list-style: none; padding-left: 0; }
        .icon-list li { list-style: none; padding-left: 30px; position: relative; margin-bottom: 10px; }
        .icon-list li .icon { position: absolute; left: 0; top: 1px; font-size: 1.1rem; color: var(--primary-accent); }
        .step-list { list-style: none; padding-left: 0; counter-reset: step-counter; margin-top: 1em;}
        .step-list li { counter-increment: step-counter; position: relative; margin-left: 8px; padding-left: 28px; margin-bottom: 0.7em; }
        .step-list li::before { content: counter(step-counter); position: absolute; left: -10px; top: 1px; background-color: var(--secondary-accent); color: var(--bg-light); width: 20px; height: 20px; border-radius: 50%; font-size: 0.75em; font-weight: bold; text-align: center; line-height: 20px; }
        .title-slide .slide-content { background: none; border: none; box-shadow: none; backdrop-filter: none; -webkit-backdrop-filter: none; text-align: center; }
        .title-slide .presenter-info { margin-top: 2em; color: var(--text-medium); }
        .title-slide .presenter-info strong { color: var(--text-dark); }
        .references-slide .slide-content { background: rgba(232, 239, 243, 0.8); backdrop-filter: blur(8px); padding: 25px;}
        .references-slide h2 { border-bottom-color: var(--primary-accent); color: var(--primary-accent); margin-bottom: 0.6em; }
        .references-list.compact { list-style: none; padding-left: 0;}
        .references-list.compact li { font-size: 0.7rem; line-height: 1.3; margin-bottom: 3px; color: var(--text-medium);}
        .final-slide-text { text-align: center; max-width: 700px;}
        .final-slide-text .contact-info { margin-top: 1.5em; font-weight: 400; color: var(--text-dark); }
        .final-slide-text .contact-info strong { color: var(--text-dark); }
        /* --- Bitiş: Layout & Tipografi & Diğer Stiller --- */

        /* --- Navigasyon & İlerleme --- */
        .navigation-area {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 15px;
        }
        .progress-indicator {
            width: 90%;
            max-width: 1000px;
            height: 5px;
            background-color: rgba(0,119,182,0.15);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent));
            /* Geçiş süresi kısaltıldı */
            transition: width 0.3s ease-out;
        }
        .navigation-controls {
            background: rgba(244,247,249,0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0,119,182,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 15px var(--shadow-color-light);
        }
        .nav-button, #audioControlBtn {
            background-color: var(--primary-accent);
            color: var(--bg-light);
            border: none;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.4rem;
            font-weight: bold;
            line-height: 38px;
            text-align: center;
            padding: 0;
            box-shadow: 0 2px 5px var(--shadow-color-light);
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav-button:hover:not(:disabled), #audioControlBtn:hover {
            background-color: var(--secondary-accent);
            color: var(--bg-light);
            transform: scale(1.1);
            box-shadow: 0 4px 10px var(--shadow-color-medium);
        }
        .nav-button:disabled {
            background-color: rgba(176,184,196,0.7);
            color: rgba(90,103,125,0.5);
            box-shadow: none;
            transform: none;
            cursor: not-allowed;
        }
        #slideCounter {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-medium);
            min-width: 50px;
            text-align: center;
        }
        #audioControlBtn { background-color: var(--secondary-accent); }
        #audioControlBtn.playing { background-color: var(--highlight); color: var(--text-dark); }

        /* --- Erişilebilirlik --- */
        .nav-button:focus-visible, #audioControlBtn:focus-visible {
            outline: 3px solid var(--highlight);
            outline-offset: 2px;
            background-color: var(--highlight);
            color: var(--text-dark);
        }

        /* --- Scrollbar Stili --- */
        .slide::-webkit-scrollbar { width: 10px; }
        .slide::-webkit-scrollbar-track { background: transparent; }
        .slide::-webkit-scrollbar-thumb {
            background-color: rgba(0,119,182,0.6);
            border-radius: 5px;
            border: 2px solid transparent;
            background-clip: content-box;
        }
        .slide::-webkit-scrollbar-thumb:hover { background-color: var(--primary-accent); }

        /* --- Responsive Tasarım --- */
        @media (max-width: 992px) {
            .slide { padding: 30px 35px; }
            .slide-content { padding: clamp(20px,3vw,35px); max-height: calc(100vh - 150px); }
            .slide-content.two-column { flex-direction: column; gap: 25px; }
            .two-column .text-content { order: 2; }
            .two-column .visual-content { order: 1; flex-basis: auto; width: 65%; max-width: 320px; margin-bottom: 15px; }
        }
        @media (max-width: 768px) {
            html { font-size: 14px; }
            .slide { padding: 25px 15px; }
            .slide-content { border-radius: 8px; max-height: calc(100vh - 140px); }
            .navigation-area { padding-bottom: 10px; }
            .progress-indicator { height: 4px; margin-bottom: 10px; }
            .navigation-controls { gap: 12px; padding: 8px 15px; }
            .nav-button, #audioControlBtn { width: 35px; height: 35px; font-size: 1.3rem; line-height: 35px; }
            #slideCounter { font-size: 0.85rem; }
            .animated-diagram { flex-direction: column; gap: 15px; }
            .diagram-arrow { transform: rotate(90deg); margin: 5px 0; }
            .comparison-container.detailed { flex-direction: column; align-items: center; }
            .detailed-card { max-width: 90%; }
        }
    </style>
</head>
<body>
    <div id="presentation-container" class="presentation-container" aria-live="polite">
        </div>
    <div class="background-effects"></div>

    <div class="navigation-area">
        <div class="progress-indicator">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <div class="navigation-controls">
            <button id="prevButton" class="nav-button" aria-label="Önceki Slayt">&#x2190;</button>
            <span id="slideCounter">1 / X</span>
            <button id="nextButton" class="nav-button" aria-label="Sonraki Slayt">&#x2192;</button>
            <button id="audioControlBtn" class="nav-button" aria-label="Ses Kontrol"><span>🔊</span></button>
        </div>
    </div>

    <audio id="presentationAudio" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="metadata"></audio>

    <script>
        // === Slayt Verileri ===
        const slidesData = [
            { type: 'title', title: 'QUORUM SENSING', subtitle: 'Bakteriyel Fısıltılardan Biyoteknolojik Senfonilere', presenter: 'Sait Ramazan Gülbay', event: 'Tıbbi Mikrobiyoloji Kongresi - 5 Nisan 2025' },
            { type: 'two-column', reversed: true, htmlContent: `<h2>Giriş: Mikroskobik Sosyal Ağ</h2><h3>Keşif Yolculuğumuz</h3><ul class="agenda-list"><li><span class="agenda-number">I.</span> QS Nedir? <span class="agenda-detail">Temel Kavramlar</span></li><li><span class="agenda-number">II.</span> İşleyiş Sırları: <span class="agenda-detail">Mekanizma</span></li><li><span class="agenda-number">III.</span> Bakteriyel Lehçeler: <span class="agenda-detail">Gram Farklılıkları</span></li><li><span class="agenda-number">IV.</span> Klinik Yankılar: <span class="agenda-detail">Hastalıklar</span></li><li><span class="agenda-number">V.</span> Müdahale Sanatı: <span class="agenda-detail">Quorum Quenching</span></li><li><span class="agenda-number">VI.</span> Ufuktaki Gelişmeler: <span class="agenda-detail">Gelecek</span></li></ul>`, imageSrc: 'https://images.unsplash.com/photo-1531297484001-80022131c5a9?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Teknolojik arayüz' },
            { type: 'two-column', reversed: false, htmlContent: `<h2>Konsept: <span class="highlight">Yeterli Çoğunluk</span> Algısı</h2><h3>Bakteriler Nasıl "Anlaşır"?</h3><p>QS, bakterilerin <span class="highlight">nüfus yoğunluklarını</span> algılayıp, kritik eşik aşılınca <span class="highlight">toplu davranışları</span> (örn. saldırı) senkronize ettikleri <span class="highlight">sinyal sistemidir</span> <span class="citation">[1]</span>.</p><p>Tekil bakteri etkisizken, <span class="highlight">"ordu"</span> yeterli sayıya ulaştığında koordineli hareket eder.</p><p class="analogy"><strong>Analoji:</strong> Konserde yeterli kalabalık oluşunca başlayan alkış.</p>`, imageSrc: 'https://images.unsplash.com/photo-1461773511539-9f8f653f65d6?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Grup etkileşimi' },
            { type: 'single-column', htmlContentTop: `<h2>İşleyiş: <span class="highlight">4 Adımda</span> İletişim Döngüsü</h2><h3>Sinyal Moleküllerinin Yolculuğu <span class="citation">[2]</span></h3>`, htmlContentDiagram: `<div class="diagram-node"> <span class="node-icon">🧬</span><span class="node-label">Üretim & Salınım (AI)</span></div> <div class="diagram-arrow">→</div> <div class="diagram-node"> <span class="node-icon">📈</span><span class="node-label">Birikim (Yoğunluk↑)</span></div> <div class="diagram-arrow">→</div> <div class="diagram-node"> <span class="node-icon">🔑</span><span class="node-label">Algılama (Reseptör)</span></div> <div class="diagram-arrow">→</div> <div class="diagram-node"> <span class="node-icon">💡</span><span class="node-label">Yanıt (Gen İfadesi)</span></div>` },
            { type: 'two-column', reversed: true, htmlContent: `<h2>Anahtar Oyuncular: <span class="highlight">Moleküler Alfabe</span></h2><h3>Sinyaller (AI) ve Alıcılar (Reseptörler)</h3><div class="component-section"><h4>Otoindükleyiciler (AI'lar)</h4><ul><li><span class="highlight term">AHL:</span> <span class="tag g-neg">G-</span></li><li><span class="highlight term">AIP:</span> <span class="tag g-pos">G+</span></li><li><span class="highlight term">AI-2:</span> <span class="tag g-uni">Evrensel</span> <span class="citation">[3, 4]</span></li><li>Diğerleri...</li></ul></div><div class="component-section"><h4>Reseptörler</h4><ul><li>Sinyalleri tanıyan proteinler.</li><li>Hücre içi sinyali aktive eder.</li><li>Gen ifadesini düzenler.</li></ul></div>`, imageSrc: 'https://images.unsplash.com/photo-1532187863486-abf9dbad1b69?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Bilimsel araştırma' },
            { type: 'single-column', htmlContentTop: `<h2>Sistem Mimarileri: <span class="highlight">Gram (+) vs Gram (-)</span></h2><h3>Farklı Yapılar, Ortak Amaç</h3>`, htmlContentComparison: `<div class="comparison-item detailed-card"><div class="card-header g-neg-header"><span class="icon">➖</span> Gram-Negatif</div><div class="card-body"><ul><li>Sinyal: <span class="highlight">AHL</span> <span class="citation">[2]</span></li><li>Geçiş: <span class="highlight">Pasif difüzyon</span></li><li>Algılama: <span class="highlight">Sitoplazmik</span></li></ul></div></div><div class="comparison-item detailed-card"><div class="card-header g-pos-header"><span class="icon">➕</span> Gram-Pozitif</div><div class="card-body"><ul><li>Sinyal: <span class="highlight">Peptit (AIP)</span> <span class="citation">[3]</span></li><li>Geçiş: <span class="highlight">Aktif transport</span></li><li>Algılama: <span class="highlight">Membran</span></li></ul></div></div>`, note: `**Evrensel Sinyal (AI-2):** Türler arası köprü <span class="citation">[4]</span>.` },
            { type: 'two-column', reversed: false, htmlContent: `<h2>Kolektif Eylemler: <span class="highlight">QS Ne Yapar?</span></h2><h3>Bireyselden Topluluğa</h3><ul class="icon-list"><li><span class="icon">🛡️</span><span class="highlight">Biyofilm Oluşumu</span> <span class="citation">[5]</span></li><li><span class="icon">☠️</span><span class="highlight">Virülans Faktörleri</span> <span class="citation">[1, 6]</span></li><li><span class="icon">💡</span>Biyolüminesans</li><li><span class="icon">💊</span>Antibiyotik/Direnç</li><li><span class="icon">🧬</span>Gen Transferi</li><li><span class="icon">⏳</span>Sporülasyon</li></ul>`, imageSrc: 'https://images.unsplash.com/photo-1606165093857-3635f885b4ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Bakteri görünümü' },
            { type: 'two-column', reversed: true, htmlContent: `<h2>Klinik Sahne: <span class="highlight">QS ve Enfeksiyonlar</span></h2><h3>Hastalıkların Orkestra Şefi</h3><p>Patojenler QS'i stratejik kullanır <span class="citation">[6]</span>:</p><ol class="step-list"><li><strong>Gizlen:</strong> Azken sessiz kal.</li><li><strong>Algıla:</strong> Yeterli sayıya ulaş.</li><li><strong>Saldır:</strong> Eş zamanlı virülans.</li></ol><p class="pathogen-examples"><strong>Örnekler:</strong> <i>P. aeruginosa</i> <span class="citation">[7]</span>, <i>S. aureus</i> <span class="citation">[8]</span>.</p>`, imageSrc: 'https://images.unsplash.com/photo-1579154284327-b79d72e93a18?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Enfeksiyon illüstrasyonu' },
            { type: 'two-column', reversed: false, htmlContent: `<h2>Aşil Topuğu: <span class="highlight">Biyofilm ve Direnç</span></h2><h3>Tedavideki Engel</h3><h4>Biyofilm Kalkanı:</h4><ul><li>QS, oluşumu <span class="highlight">yönetir</span> <span class="citation">[5]</span>.</li><li>Antibiyotiklere (<span class="highlight">~1000x</span>) karşı korur.</li><li><span class="highlight">İmplant/Kateter</span> enfeksiyonları.</li></ul><h4 style="margin-top:1em;">Direnç Mekanizmaları:</h4><ul><li>QS, <span class="highlight">direnç genlerini</span> aktive edebilir.</li><li>Fiziksel bariyer + Yavaş metabolizma.</li></ul>`, imageSrc: 'https://images.unsplash.com/photo-1617896044912-0b0f5a7ab0e9?ixlib=rb-4.0.3&auto=format&fit=crop&w=387&q=80', imageAlt: 'Antibiyotik direnci' },
            { type: 'two-column', reversed: true, htmlContent: `<h2>Karşı Hamle: <span class="highlight">Quorum Quenching</span></h2><h3>İletişimi Sabote Etmek</h3><p>Antibiyotik direncine <span class="highlight">yenilikçi</span> bir strateji <span class="citation">[9, 10]</span>.</p><p><strong>QQ Taktikleri:</strong></p><ul class="icon-list"><li><span class="icon">🚫</span>Sinyal Üretimini Engelle</li><li><span class="icon">✂️</span>Sinyali Parçala</li><li><span class="icon">🔒</span>Sinyal Algılamayı Boz</li></ul><p class="advantage"><strong>Avantajı:</strong> Direnç <span class="highlight">baskısını azaltabilir</span> <span class="citation">[10]</span>.</p>`, imageSrc: 'https://images.unsplash.com/photo-1529480771378-c600a2854359?ixlib=rb-4.0.3&auto=format&fit=crop&w=460&q=80', imageAlt: 'Strateji müdahalesi' },
            { type: 'single-column', htmlContentTop: `<h2>Vaka Çalışmaları: <span class="highlight">Kritik Patojenler</span></h2><h3>Klinik Yansımalar</h3>`, htmlContentComparison: `<div class="comparison-item detailed-card"><div class="card-header g-neg-header"><span class="icon">🦠</span><i>P. aeruginosa</i></div><div class="card-body"><ul><li><strong>Sistem:</strong> Karmaşık <span class="citation">[7]</span>.</li><li><strong>Etki:</strong> Kistik fibrozis, yanıklar.</li><li><strong>Hedef:</strong> Biyofilm, virülans.</li><li><strong>QQ Pot.:</strong> Yüksek.</li></ul></div></div><div class="comparison-item detailed-card"><div class="card-header" style="background:#D35400; color:var(--bg-light);"><span class="icon">🦠</span><i>S. aureus</i></div><div class="card-body"><ul><li><strong>Sistem:</strong> Agr (AIP) <span class="citation">[8]</span>.</li><li><strong>Etki:</strong> MRSA, deri enf., sepsis.</li><li><strong>Hedef:</strong> Toksinler, biyofilm.</li><li><strong>QQ Pot.:</strong> Araştırılıyor.</li></ul></div></div>` },
            { type: 'references', title: 'Referanslar', htmlContent: `<li>[1] Miller & Bassler (2001) Annu Rev Microbiol</li><li>[2] Papenfort & Bassler (2016) Nat Rev Microbiol</li><li>[3] Novick (2003) Mol Microbiol</li><li>[4] Xavier & Bassler (2003) Curr Opin Microbiol</li><li>[5] Davies et al. (1998) Science</li><li>[6] Rutherford & Bassler (2012) Cold Spring Harb Perspect Med</li><li>[7] Lee & Zhang (2015) Protein Cell</li><li>[8] Thoendel et al. (2011) Future Microbiol</li><li>[9] Dong et al. (2001) Nature</li><li>[10] Kalia (Ed.) (2015) Quorum Sensing vs Quorum Quenching</li>` },
            { type: 'final', title: 'Teşekkürler & İletişim', text: `Quorum Sensing'in karmaşık dünyasına yaptığımız bu yolculukta bana katıldığınız için teşekkür ederim. Bu mekanizmayı anlamak, enfeksiyonlarla mücadelede ve biyoteknolojide yeni kapılar aralamaktadır.`, contactName: 'Sait Ramazan Gülbay', contactEmail: 'sait.ramazan.gulbay@ornekmail.com' }
        ];

        // Sunum sınıfı ve başlatma
        class Presentation {
            constructor(slidesData) {
                this.slidesData = slidesData;
                this.currentSlideIndex = 0;
                this.totalSlides = slidesData.length;
                this.isTransitioning = false;
                // Geçiş süresini CSS değişkeninden al (ms cinsinden)
                this.transitionDuration = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--transition-duration') || '0.6') * 1000;
                this.container = document.getElementById('presentation-container');
                this.prevButton = document.getElementById('prevButton');
                this.nextButton = document.getElementById('nextButton');
                this.slideCounter = document.getElementById('slideCounter');
                this.progressBar = document.getElementById('progress-bar');
                this.audioElement = document.getElementById('presentationAudio');
                this.audioControlButton = document.getElementById('audioControlBtn');
                this.audioPlaying = false;
            }

            init() {
                this.preloadImages(); // Görselleri önceden yükle
                this.attachEventListeners(); // Olay dinleyicilerini bağla
                this.renderSlide(this.currentSlideIndex); // İlk slaytı göster
                this.updateNavigation(); // Navigasyonu güncelle
            }

            preloadImages() {
                this.slidesData.forEach(slide => {
                    if (slide.imageSrc) new Image().src = slide.imageSrc;
                    if (slide.imageSrcBottom) new Image().src = slide.imageSrcBottom;
                });
            }

            attachEventListeners() {
                this.prevButton.addEventListener('click', () => this.prevSlide());
                this.nextButton.addEventListener('click', () => this.nextSlide());
                this.audioControlButton.addEventListener('click', () => this.toggleAudio());

                window.addEventListener('keydown', (e) => {
                    if (this.isTransitioning) return; // Geçiş sırasında klavye işlemini engelle

                    if (['ArrowRight', 'PageDown', ' '].includes(e.key)) {
                        e.preventDefault(); this.nextSlide();
                    } else if (['ArrowLeft', 'PageUp'].includes(e.key)) {
                        e.preventDefault(); this.prevSlide();
                    } else if (e.key === 'Home') {
                        e.preventDefault(); this.goToSlide(0);
                    } else if (e.key === 'End') {
                        e.preventDefault(); this.goToSlide(this.totalSlides - 1);
                    }
                });

                if (this.audioElement) {
                    this.audioElement.onended = () => {
                        this.audioPlaying = false;
                        this.audioControlButton.classList.remove('playing');
                        this.audioControlButton.innerHTML = `<span>🔊</span>`;
                    };
                }
            }

             renderSlide(index) {
                 if (index < 0 || index >= this.totalSlides) return;
                 if (this.isTransitioning) return;
                 this.isTransitioning = true;

                 const slideData = this.slidesData[index];
                 let slideHTML = ''; // Slayt HTML içeriği burada oluşturulacak

                 // --- Slayt Tipi Kontrolü ve HTML Oluşturma ---
                 // (Önceki örnekteki gibi, veriye göre HTML string oluşturulur)
                 if (slideData.type === 'title') { slideHTML = `<div class="slide-content title-slide"><div class="title-text-wrapper"><h1 class="main-title"><span class="math-inline">\{slideData\.title\}</h1\><h2 class\="subtitle"\></span>{slideData.subtitle}</h2></div><div class="presenter-info"><p class="presenter"><strong>Sunan:</strong> <span class="math-inline">\{slideData\.presenter\}</p\><p class\="event\-info"\></span>{slideData.event}</p></div></div>`; }
                 else if (slideData.type === 'two-column') { slideHTML = `<div class="slide-content two-column <span class="math-inline">\{slideData\.reversed ? 'reversed' \: ''\}"\><div class\="text\-content"\></span>{slideData.htmlContent}</div>${slideData.imageSrc ? `<div class="visual-content"><img src="${slideData.imageSrc}" alt="${slideData.imageAlt || ''}"></div>` : ''}</div>`; }
                 else if (slideData.type === 'single-column') { slideHTML = `<div class="slide-content single-column"><div class="text-content"><span class="math-inline">\{slideData\.htmlContentTop \|\| ''\}</div\></span>{slideData.htmlContentDiagram ? `<div class="animated-diagram mechanism-diagram">${slideData.htmlContentDiagram}</div>` : ''}${slideData.htmlContentComparison ? `<div class="comparison-container detailed">${slideData.htmlContentComparison}</div>` : ''}${slideData.note ? `<p class="note">${slideData.note}</p>` : ''}${slideData.imageSrcBottom ? `<div class="visual-content lower-visual"><img src="${slideData.imageSrcBottom}" alt="${slideData.imageAltBottom || ''}"></div>` : ''}</div>`; }
                 else if (slideData.type === 'references') { slideHTML = `<div class="slide-content references-slide"><h2><span class="math-inline">\{slideData\.title\}</h2\><ul class\="references\-list compact"\></span>{slideData.htmlContent}</ul></div>`; }
                 else if (slideData.type === 'final') { slideHTML = `<div class="slide-content single-column"><div class="final-slide-text"><h2 class="subtitle"><span class="math-inline">\{slideData\.title\}</h2\><p\></span>{slideData.text}</p><div class="contact-info"><p><strong><span class="math-inline">\{slideData\.contactName\}</strong\></p\><p\></span>{slideData.contactEmail}</p></div></div></div>`; }
                 // --- Bitiş: HTML Oluşturma ---

                 const exitingSlide = this.container.querySelector('.slide.active');
                 if (exitingSlide) {
                     exitingSlide.classList.remove('active');
                     exitingSlide.classList.add('exiting');
                     // Geçiş süresi kadar sonra DOM'dan kaldır
                     setTimeout(() => {
                         if (exitingSlide && exitingSlide.parentNode === this.container) {
                             this.container.removeChild(exitingSlide);
                         }
                     }, this.transitionDuration);
                 }

                 const newSlide = document.createElement('section');
                 newSlide.className = 'slide';
                 newSlide.id = `slide${index + 1}`;
                 newSlide.innerHTML = slideHTML;
                 this.container.appendChild(newSlide);

                 // Yeni slayta odaklanma (erişilebilirlik)
                 newSlide.tabIndex = -1; // Programaatik olarak odaklanabilmesi için
                 // Kısa bir gecikme sonrası odaklanma daha iyi çalışabilir
                 setTimeout(() => newSlide.focus({ preventScroll: true }), 0);

                 // Animasyon için 'active' sınıfını ekle (tarayıcının repaint yapmasını bekleyerek)
                 requestAnimationFrame(() => {
                     requestAnimationFrame(() => {
                         newSlide.classList.add('active');
                         // Geçiş tamamlandıktan sonra flag'i sıfırla
                         setTimeout(() => { this.isTransitioning = false; this.updateNavigation(); }, this.transitionDuration);
                     });
                 });

                 this.scrollToTop(newSlide); // Yeni slayt içeriğini üste kaydır
             }


            updateNavigation() {
                this.slideCounter.textContent = `${this.currentSlideIndex + 1} / ${this.totalSlides}`;
                // Geçiş sırasında da butonlar deaktif olmalı
                this.prevButton.disabled = (this.currentSlideIndex === 0) || this.isTransitioning;
                this.nextButton.disabled = (this.currentSlideIndex === this.totalSlides - 1) || this.isTransitioning;
                const progress = ((this.currentSlideIndex + 1) / this.totalSlides) * 100;
                this.progressBar.style.width = `${progress}%`;
            }

            goToSlide(index) {
                if (index >= 0 && index < this.totalSlides && index !== this.currentSlideIndex && !this.isTransitioning) {
                    this.currentSlideIndex = index;
                    this.renderSlide(this.currentSlideIndex);
                    this.updateNavigation();
                }
            }

            nextSlide() { this.goToSlide(this.currentSlideIndex + 1); }
            prevSlide() { this.goToSlide(this.currentSlideIndex - 1); }

            scrollToTop(slideElement) {
                // İçeriği taşıyan .slide-content elementini bul ve scrollTop'u sıfırla
                const content = slideElement?.querySelector('.slide-content');
                if (content) { content.scrollTop = 0; }
            }

            toggleAudio() {
                if (!this.audioElement) { alert("Ses elementi bulunamadı."); return; }
                // src kontrolü iyileştirildi
                const currentSrc = this.audioElement.currentSrc || this.audioElement.src;
                if (!currentSrc) { alert("Lütfen geçerli bir ses dosyası belirtin."); return; }

                this.audioControlButton.disabled = true; // İşlem sırasında butonu deaktif et

                if (this.audioPlaying) {
                    this.audioElement.pause();
                    this.audioPlaying = false;
                    this.updateAudioButton(); // Buton durumunu güncelleyen yardımcı fonksiyon
                } else {
                    const playPromise = this.audioElement.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            this.audioPlaying = true;
                            this.updateAudioButton();
                        }).catch(error => {
                            console.error("Audio play failed:", error);
                            this.audioPlaying = false;
                            this.updateAudioButton();
                            // Kullanıcı etkileşimi olmadan çalma engellenirse uyarı verilebilir
                            if (error.name === 'NotAllowedError') {
                                alert("Tarayıcı, otomatik ses çalmayı engelledi. Lütfen oynatmak için butona tekrar tıklayın.");
                            }
                        });
                    } else {
                        // play() promise döndürmüyorsa (eski tarayıcılar?)
                        this.audioPlaying = true;
                        this.updateAudioButton();
                    }
                }
            }

            updateAudioButton() {
                 // Ses ikonunu ve 'playing' sınıfını güncelle, butonu tekrar aktif et
                this.audioControlButton.innerHTML = `<span>${this.audioPlaying ? '🔈' : '🔊'}</span>`;
                this.audioControlButton.classList.toggle('playing', this.audioPlaying);
                this.audioControlButton.disabled = false;
            }
        }

        // Sunum başlatılıyor
        document.addEventListener('DOMContentLoaded', () => {
            const presentation = new Presentation(slidesData);
            presentation.init();
        });
    </script>
</body>
</html>
